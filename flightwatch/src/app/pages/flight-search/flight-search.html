<section class="page">
  <h2>Cerca un volo</h2>

  <form class="search-form" (ngSubmit)="onSearch()">
    <label>
      Numero volo (es. AZ203)
      <input
        [(ngModel)]="flightNumber"
        name="flightNumber"
        placeholder="Inserisci numero volo"
      />
    </label>

    <button type="submit">Cerca</button>
  </form>

  <div *ngIf="!searched" class="hint">
    Inserisci un numero di volo e premi <strong>Cerca</strong>.
  </div>

  <div *ngIf="loading" class="loading">
    Ricerca in corso...
  </div>

  <div *ngIf="error && !loading" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && results.length" class="results">
    <div *ngFor="let f of results" class="flight-card">
      <header>
        <h3>{{ f.flight?.iata || 'N/A' }}</h3>
        <span class="airline">{{ f.airline?.name || f.airline?.iata }}</span>
      </header>

      <p class="route">
        {{ f.departure?.airport || 'Sconosciuto' }}
        ({{ f.departure?.iata || '?' }})
        â†’
        {{ f.arrival?.airport || 'Sconosciuto' }}
        ({{ f.arrival?.iata || '?' }})
      </p>

      <p>
        Partenza schedulata:
        <strong>{{ f.departure?.scheduled || '-' }}</strong>
      </p>
      <p>
        Arrivo schedulato:
        <strong>{{ f.arrival?.scheduled || '-' }}</strong>
      </p>

      <p>
        Stato:
        <span [class]="getStatusClass(f.flight_status)">
          {{ f.flight_status || 'n.d.' }}
        </span>
      </p>

      <button (click)="goToDetail(f)">Dettagli volo</button>
    </div>
  </div>
</section>
