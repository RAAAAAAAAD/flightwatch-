<div class="page" [class.search-submitted]="isSearchSubmitted">
  <div class="search-container" [class.moved-up]="isSearchSubmitted">
    <div class="search-box">
      <h2 *ngIf="!isSearchSubmitted">Cerca voli per aeroporto</h2>
      
      <form class="search-form" (ngSubmit)="onSearch()">
        <div class="input-group-custom">
          <input 
            type="text" 
            class="form-control-custom" 
            [(ngModel)]="airportCode"
            name="airportCode"
            placeholder="Inserire codice aeroporto (es. FCO)"
            required>
          
          <div class="radio-group">
            <label class="radio-label">
              <input 
                type="radio" 
                [(ngModel)]="type" 
                name="type" 
                value="departures">
              Partenze
            </label>
            <label class="radio-label">
              <input 
                type="radio" 
                [(ngModel)]="type" 
                name="type" 
                value="arrivals">
              Arrivi
            </label>
          </div>
          
          <button type="submit" class="btn-search">
            Cerca
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="results-container" *ngIf="isSearchSubmitted">
    <p class="loading" *ngIf="loading">Ricerca in corso...</p>
    
    <div class="error" *ngIf="error">
      {{ error }}
    </div>
    
    <div class="results" *ngIf="results.length > 0">
      <div class="flight-card" *ngFor="let f of results">
        <div class="flight-header">
          <h3>{{ f.flight?.iata || 'N/A' }}</h3>
          <span [ngClass]="getStatusClass(f.flight_status)">
            {{ f.flight_status || 'n.d.' }}
          </span>
        </div>
        
        <div class="flight-airline">
          {{ f.airline?.name || 'Compagnia sconosciuta' }}
        </div>
        
        <div class="flight-route">
          <div class="route-item">
            <span class="route-label">Da:</span>
            <strong>{{ f.departure?.airport || 'Sconosciuto' }}</strong> ({{ f.departure?.iata || '?' }})
          </div>
          <div class="route-arrow">â†’</div>
          <div class="route-item">
            <span class="route-label">A:</span>
            <strong>{{ f.arrival?.airport || 'Sconosciuto' }}</strong> ({{ f.arrival?.iata || '?' }})
          </div>
        </div>
        
        <div class="flight-details">
          <div class="detail-row">
            <strong>Partenza:</strong> {{ f.departure?.scheduled || '-' }}
          </div>
          <div class="detail-row">
            <strong>Arrivo:</strong> {{ f.arrival?.scheduled || '-' }}
          </div>
        </div>
        
        <button class="btn-detail" (click)="goToDetail(f)">
          Dettaglio
        </button>
      </div>
    </div>
  </div>
</div>
